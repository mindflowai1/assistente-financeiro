<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#111827" />
    <meta name="description" content="Gerencie suas finanças de forma inteligente direto do WhatsApp com IA" />
    <title>Seu Assistente Financeiro</title>
    <link rel="icon" type="image/png" href="https://firebasestorage.googleapis.com/v0/b/online-media-2df7b.firebasestorage.app/o/logo%20assistente%20fav%20ico.png?alt=media&token=1df1410a-edad-41d8-8811-f156150788f8" />
    
    <!-- Preconnect para recursos externos críticos -->
    <link rel="preconnect" href="https://firebasestorage.googleapis.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.clarity.ms">
    <link rel="dns-prefetch" href="https://connect.facebook.net">
    <link rel="dns-prefetch" href="https://analytics.tiktok.com">
    
    <!-- Link DNS preconnect para logo (sem preload que bloqueia) -->
    <link rel="dns-prefetch" href="https://firebasestorage.googleapis.com">

    <!-- Facebook Domain Verification -->
    <meta name="facebook-domain-verification" content="wihtcqqv6lyk8p0wp2qgdp6x60fwe9" />

    <!-- Analytics Scripts - REMOVIDOS DO <head> para não bloquear renderização -->
    <!-- Serão adicionados no final do <body> -->
    
    <!-- CSS inline crítico para loading inicial -->
    <style>
        body { 
            margin: 0; 
            background: #111827; 
            font-family: system-ui, -apple-system, sans-serif;
        }
        #root { min-height: 100vh; }
        .initial-loader {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #111827;
            z-index: 9999;
        }
        .loader-spinner {
            width: 48px;
            height: 48px;
            border: 3px solid #1f2937;
            border-top-color: #10b981;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Meta Pixel Noscript -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1513614419906000&ev=PageView&noscript=1"
    /></noscript>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1621531598314509&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Noscript -->
    
    <!-- Loading inicial inline para FCP rápido -->
    <div id="root">
        <div class="initial-loader">
            <div class="loader-spinner"></div>
        </div>
    </div>
    
    <script type="module" src="/index.tsx"></script>
    
    <!-- Analytics Scripts - CARREGADOS NO FINAL para não bloquear renderização -->
    <script>
        // Microsoft Clarity - carregado após window.load
        window.addEventListener('load', function() {
            setTimeout(function() {
                (function(c,l,a,r,i,t,y){
                    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
                })(window, document, "clarity", "script", "tvtr3pe7ua");
            }, 2000); // Delay de 2 segundos
        });
        
        // Meta Pixel - carregado após window.load com delay
        window.addEventListener('load', function() {
            setTimeout(function() {
                !function(f,b,e,v,n,t,s)
                {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
                n.callMethod.apply(n,arguments):n.queue.push(arguments)};
                if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
                n.queue=[];t=b.createElement(e);t.async=!0;
                t.src=v;s=b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t,s)}(window, document,'script',
                'https://connect.facebook.net/en_US/fbevents.js');
                fbq('init', '1513614419906000');
                fbq('init', '1621531598314509');
                fbq('track', 'PageView');
            }, 2000); // Delay de 2 segundos
        });
        
        // TikTok Pixel - carregado após window.load com delay
        window.addEventListener('load', function() {
            setTimeout(function() {
                !function (w, d, t) {
                  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(
                var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script")
                ;n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};
                  ttq.load('D401QTJC77UACP40867G');
                  ttq.page();
                }(window, document, 'ttq');
            }, 2000); // Delay de 2 segundos
        });
    </script>
</body>
</html>